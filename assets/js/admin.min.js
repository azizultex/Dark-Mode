/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ({

/***/ "./assets/js/admin.js":
/*!****************************!*\
  !*** ./assets/js/admin.js ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


__webpack_require__(/*! ./comoponents/notice */ "./assets/js/comoponents/notice.js");

;

(function () {
  var app = {
    init: function init() {
      app.initDarkMode();
      app.handleExcludes();
      app.checkEditorDarkmode();
      app.checkOnlyDarkmode();
      var btnSwitch = document.querySelector('.dark-mode-switch');

      if (btnSwitch) {
        btnSwitch.addEventListener('click', app.handleSwitchToggle);
      }

      window.addEventListener('dark_mode_init', app.checkDarkMode); //Admin Darkmode Settings Toggle

      var adminDarkmode = document.querySelector('.admin_darkmode input[type=checkbox]');

      if (adminDarkmode) {
        adminDarkmode.addEventListener('change', app.checkEditorDarkmode);
      } //Only Darkmode Settings Toggle


      var onlyDarkmode = document.querySelector('.only_darkmode input[type=checkbox]');

      if (onlyDarkmode) {
        onlyDarkmode.addEventListener('change', app.checkOnlyDarkmode);
      }
    },
    checkOnlyDarkmode: function checkOnlyDarkmode() {
      var checkBox = document.querySelector('.only_darkmode input[type=checkbox]');

      if (!checkBox) {
        return;
      }

      var is_darkmode_enabled = checkBox.checked;

      if (is_darkmode_enabled) {
        document.querySelector('.admin_darkmode').style.display = 'none';
        document.querySelector('.markdown_editor').style.display = 'none';
        document.querySelector('.productivity_sound').style.display = 'none';
        document.querySelector('.new_fonts').style.display = 'none';
      } else {
        document.querySelector('.admin_darkmode').style.display = 'revert';
        document.querySelector('.markdown_editor').style.display = 'revert';
        document.querySelector('.productivity_sound').style.display = 'revert';
        document.querySelector('.new_fonts').style.display = 'revert';
      }
    },
    checkEditorDarkmode: function checkEditorDarkmode() {
      var checkBox = document.querySelector('.admin_darkmode input[type=checkbox]');

      if (!checkBox) {
        return;
      }

      var is_darkmode_enabled = checkBox.checked;

      if (is_darkmode_enabled) {
        if (document.querySelector('.classic_editor_darkmode')) {
          document.querySelector('.classic_editor_darkmode').style.display = 'revert';
        }

        if (document.querySelector('.gutenberg_darkmode')) {
          document.querySelector('.gutenberg_darkmode').style.display = 'revert';
        }
      } else {
        if (document.querySelector('.classic_editor_darkmode')) {
          document.querySelector('.classic_editor_darkmode').style.display = 'none';
        }

        if (document.querySelector('.gutenberg_darkmode')) {
          document.querySelector('.gutenberg_darkmode').style.display = 'none';
        }
      }
    },
    checkDarkMode: function checkDarkMode() {
      document.querySelector('.dark-mode-switch').classList.toggle('active');
    },
    initDarkMode: function initDarkMode() {
      var is_saved = localStorage.getItem('dark_mode_active');

      if (!is_saved) {
        is_saved = 1;
      }

      var is_gutenberg = document.querySelector('body').classList.contains('block-editor-page');

      if (is_saved && is_saved != 0) {
        document.querySelector('html').classList.add('dark-mode-active');
        document.querySelector('.dark-mode-switch').classList.toggle('active');
        DarkMode.enable();
      }
    },
    handleSwitchToggle: function handleSwitchToggle(e) {
      e.preventDefault();
      document.querySelector('html').classList.toggle('dark-mode-active');
      document.querySelector('.dark-mode-switch').classList.toggle('active');
      var is_saved = document.querySelector('html').classList.contains('dark-mode-active') ? 1 : 0;

      if (is_saved) {
        DarkMode.enable();
      } else {
        DarkMode.disable();
      }

      localStorage.setItem('dark_mode_active', is_saved);
    },
    handleExcludes: function handleExcludes() {
      var elements = document.querySelectorAll('.dark-mode-ignore, .color-palette, .health-check-accordion-heading');

      if (!elements) {
        return;
      }

      elements.forEach(function (element) {
        element.classList.add('dark-mode-ignore');
        var children = element.querySelectorAll('*');
        children.forEach(function (child) {
          child.classList.add('dark-mode-ignore');
        });
      });
    }
  };
  document.addEventListener('DOMContentLoaded', app.init);
})();

/***/ }),

/***/ "./assets/js/comoponents/notice.js":
/*!*****************************************!*\
  !*** ./assets/js/comoponents/notice.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


;

(function ($) {
  $(document).ready(function () {
    //Handle the update notice
    $(document).on('click', '.wp-markdown-editor-update-notice .notice-dismiss', function () {
      wp.ajax.send('wp_markdown_editor_update_notice', {
        success: function success() {},
        error: function error(_error) {
          return console.log(_error);
        }
      });
    });
    /**--------------Review Notice----------------**/
    //handle review notice remind_later

    $('.wp-markdown-editor-review-notice .remind_later').on('click', function () {
      $('.notice-overlay-wrap').css('display', 'flex');
    }); //close the review notice

    $('.wp-markdown-editor-review-notice .close-notice').on('click', function () {
      $(this).parents('.notice-overlay-wrap').css('display', 'none');
    });
    $('.wp-markdown-editor-review-notice .notice-overlay-actions a, .wp-markdown-editor-review-notice .notice-actions a.hide_notice, .wp-markdown-editor-review-notice .notice-dismiss').on('click', function () {
      $(this).parents('.wp-markdown-editor-review-notice').slideUp();
      var value = $(this).data('value');

      if (!value) {
        value = 7;
      }

      wp.ajax.send('wp_markdown_editor_review_notice', {
        data: {
          value: value
        },
        success: function success() {},
        error: function error(_error2) {
          return console.log(_error2);
        }
      });
    });
    /*-- Affiliate Notice --*/
    //close the affiliate notice

    $('.wp-markdown-editor-affiliate-notice .close-notice').on('click', function () {
      $(this).parents('.notice-overlay-wrap').css('display', 'none');
    });
    $('.wp-markdown-editor-affiliate-notice .dashicons-dismiss').on('click', function (e) {
      e.preventDefault();
      $('.wp-markdown-editor-affiliate-notice .notice-overlay-wrap').css('display', 'flex');
    });
    $(".wp-markdown-editor-affiliate-notice .notice-overlay-actions a, .wp-markdown-editor-affiliate-notice .notice-dismiss, .wp-markdown-editor-affiliate-notice .notice-actions a.hide_notice").on('click', function () {
      $(this).parents('.wp-markdown-editor-affiliate-notice').slideUp();
      var value = $(this).data('value');

      if (!value) {
        value = 7;
      }

      wp.ajax.send('wp_markdown_editor_affiliate_notice', {
        data: {
          value: value
        },
        success: function success() {},
        error: function error(_error3) {
          return console.log(_error3);
        }
      });
    });
  });
})(jQuery);

/***/ }),

/***/ 0:
/*!**********************************!*\
  !*** multi ./assets/js/admin.js ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! C:\xampp\htdocs\wp-dark-mode\wp-content\plugins\dark-mode\assets\js\admin.js */"./assets/js/admin.js");


/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL2FkbWluLmpzIiwid2VicGFjazovLy8uL2Fzc2V0cy9qcy9jb21vcG9uZW50cy9ub3RpY2UuanMiXSwibmFtZXMiOlsiYXBwIiwiaW5pdCIsImluaXREYXJrTW9kZSIsImhhbmRsZUV4Y2x1ZGVzIiwiY2hlY2tFZGl0b3JEYXJrbW9kZSIsImNoZWNrT25seURhcmttb2RlIiwiYnRuU3dpdGNoIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsImhhbmRsZVN3aXRjaFRvZ2dsZSIsIndpbmRvdyIsImNoZWNrRGFya01vZGUiLCJhZG1pbkRhcmttb2RlIiwib25seURhcmttb2RlIiwiY2hlY2tCb3giLCJpc19kYXJrbW9kZV9lbmFibGVkIiwiY2hlY2tlZCIsInN0eWxlIiwiZGlzcGxheSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImlzX3NhdmVkIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImlzX2d1dGVuYmVyZyIsImNvbnRhaW5zIiwiYWRkIiwiRGFya01vZGUiLCJlbmFibGUiLCJlIiwicHJldmVudERlZmF1bHQiLCJkaXNhYmxlIiwic2V0SXRlbSIsImVsZW1lbnRzIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJlbGVtZW50IiwiY2hpbGRyZW4iLCJjaGlsZCIsIiQiLCJyZWFkeSIsIm9uIiwid3AiLCJhamF4Iiwic2VuZCIsInN1Y2Nlc3MiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJjc3MiLCJwYXJlbnRzIiwic2xpZGVVcCIsInZhbHVlIiwiZGF0YSIsImpRdWVyeSJdLCJtYXBwaW5ncyI6IjtRQUFBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTtRQUNBOzs7UUFHQTtR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QUFDLElBQUQsQ0FBRCxDQUFRVyxPQUFSLENBQWdCLHNCQUFoQixFQUF3Q0QsR0FBeEMsQ0FBNEMsU0FBNUMsRUFBdUQsTUFBdkQ7QUFDSCxLQUZEO0FBSUFWLEtBQUMsQ0FBQyx5REFBRCxDQUFELENBQTZERSxFQUE3RCxDQUFnRSxPQUFoRSxFQUF5RSxVQUFVWixDQUFWLEVBQWE7QUFDbEZBLE9BQUMsQ0FBQ0MsY0FBRjtBQUNBUyxPQUFDLENBQUMsMkRBQUQsQ0FBRCxDQUErRFUsR0FBL0QsQ0FBbUUsU0FBbkUsRUFBOEUsTUFBOUU7QUFDSCxLQUhEO0FBS0FWLEtBQUMsNExBQUQsQ0FBOExFLEVBQTlMLENBQWlNLE9BQWpNLEVBQTBNLFlBQVk7QUFFbE5GLE9BQUMsQ0FBQyxJQUFELENBQUQsQ0FBUVcsT0FBUixDQUFnQixzQ0FBaEIsRUFBd0RDLE9BQXhEO0FBRUEsVUFBSUMsS0FBSyxHQUFHYixDQUFDLENBQUMsSUFBRCxDQUFELENBQVFjLElBQVIsQ0FBYSxPQUFiLENBQVo7O0FBRUEsVUFBSSxDQUFDRCxLQUFMLEVBQVk7QUFDUkEsYUFBSyxHQUFHLENBQVI7QUFDSDs7QUFHRFYsUUFBRSxDQUFDQyxJQUFILENBQVFDLElBQVIsQ0FBYSxxQ0FBYixFQUFvRDtBQUNoRFMsWUFBSSxFQUFFO0FBQ0ZELGVBQUssRUFBTEE7QUFERSxTQUQwQztBQUloRFAsZUFBTyxFQUFFLG1CQUFNLENBQUUsQ0FKK0I7QUFLaERDLGFBQUssRUFBRSxlQUFDQSxPQUFEO0FBQUEsaUJBQVdDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZRixPQUFaLENBQVg7QUFBQTtBQUx5QyxPQUFwRDtBQVFILEtBbkJEO0FBc0JILEdBOUVEO0FBK0VILENBaEZBLEVBZ0ZFUSxNQWhGRixFIiwiZmlsZSI6ImFkbWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0ICcuL2NvbW9wb25lbnRzL25vdGljZSc7XHJcblxyXG47KGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IGFwcCA9IHtcclxuICAgICAgICBpbml0OiAoKSA9PiB7XHJcblxyXG4gICAgICAgICAgICBhcHAuaW5pdERhcmtNb2RlKCk7XHJcbiAgICAgICAgICAgIGFwcC5oYW5kbGVFeGNsdWRlcygpO1xyXG5cclxuICAgICAgICAgICAgYXBwLmNoZWNrRWRpdG9yRGFya21vZGUoKTtcclxuICAgICAgICAgICAgYXBwLmNoZWNrT25seURhcmttb2RlKCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBidG5Td2l0Y2ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGFyay1tb2RlLXN3aXRjaCcpO1xyXG4gICAgICAgICAgICBpZiAoYnRuU3dpdGNoKSB7XHJcbiAgICAgICAgICAgICAgICBidG5Td2l0Y2guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhcHAuaGFuZGxlU3dpdGNoVG9nZ2xlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2RhcmtfbW9kZV9pbml0JywgYXBwLmNoZWNrRGFya01vZGUpO1xyXG5cclxuICAgICAgICAgICAgLy9BZG1pbiBEYXJrbW9kZSBTZXR0aW5ncyBUb2dnbGVcclxuICAgICAgICAgICAgY29uc3QgYWRtaW5EYXJrbW9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZG1pbl9kYXJrbW9kZSBpbnB1dFt0eXBlPWNoZWNrYm94XScpO1xyXG4gICAgICAgICAgICBpZiAoYWRtaW5EYXJrbW9kZSkge1xyXG4gICAgICAgICAgICAgICAgYWRtaW5EYXJrbW9kZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBhcHAuY2hlY2tFZGl0b3JEYXJrbW9kZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vT25seSBEYXJrbW9kZSBTZXR0aW5ncyBUb2dnbGVcclxuICAgICAgICAgICAgY29uc3Qgb25seURhcmttb2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm9ubHlfZGFya21vZGUgaW5wdXRbdHlwZT1jaGVja2JveF0nKTtcclxuICAgICAgICAgICAgaWYgKG9ubHlEYXJrbW9kZSkge1xyXG4gICAgICAgICAgICAgICAgb25seURhcmttb2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGFwcC5jaGVja09ubHlEYXJrbW9kZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgY2hlY2tPbmx5RGFya21vZGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc3QgY2hlY2tCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub25seV9kYXJrbW9kZSBpbnB1dFt0eXBlPWNoZWNrYm94XScpO1xyXG4gICAgICAgICAgICBpZiAoIWNoZWNrQm94KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgaXNfZGFya21vZGVfZW5hYmxlZCA9IGNoZWNrQm94LmNoZWNrZWQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoaXNfZGFya21vZGVfZW5hYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkbWluX2Rhcmttb2RlJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYXJrZG93bl9lZGl0b3InKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2R1Y3Rpdml0eV9zb3VuZCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmV3X2ZvbnRzJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZG1pbl9kYXJrbW9kZScpLnN0eWxlLmRpc3BsYXkgPSAncmV2ZXJ0JztcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYXJrZG93bl9lZGl0b3InKS5zdHlsZS5kaXNwbGF5ID0gJ3JldmVydCc7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZHVjdGl2aXR5X3NvdW5kJykuc3R5bGUuZGlzcGxheSA9ICdyZXZlcnQnO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ld19mb250cycpLnN0eWxlLmRpc3BsYXkgPSAncmV2ZXJ0JztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGNoZWNrRWRpdG9yRGFya21vZGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc3QgY2hlY2tCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRtaW5fZGFya21vZGUgaW5wdXRbdHlwZT1jaGVja2JveF0nKTtcclxuICAgICAgICAgICAgaWYgKCFjaGVja0JveCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGlzX2Rhcmttb2RlX2VuYWJsZWQgPSBjaGVja0JveC5jaGVja2VkO1xyXG5cclxuICAgICAgICAgICAgaWYgKGlzX2Rhcmttb2RlX2VuYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2xhc3NpY19lZGl0b3JfZGFya21vZGUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jbGFzc2ljX2VkaXRvcl9kYXJrbW9kZScpLnN0eWxlLmRpc3BsYXkgPSAncmV2ZXJ0JztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmd1dGVuYmVyZ19kYXJrbW9kZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmd1dGVuYmVyZ19kYXJrbW9kZScpLnN0eWxlLmRpc3BsYXkgPSAncmV2ZXJ0JztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2xhc3NpY19lZGl0b3JfZGFya21vZGUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jbGFzc2ljX2VkaXRvcl9kYXJrbW9kZScpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ndXRlbmJlcmdfZGFya21vZGUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ndXRlbmJlcmdfZGFya21vZGUnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgY2hlY2tEYXJrTW9kZTogKCkgPT4ge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGFyay1tb2RlLXN3aXRjaCcpLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGluaXREYXJrTW9kZTogKCkgPT4ge1xyXG4gICAgICAgICAgICB2YXIgaXNfc2F2ZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZGFya19tb2RlX2FjdGl2ZScpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFpc19zYXZlZCkge1xyXG4gICAgICAgICAgICAgICAgaXNfc2F2ZWQgPSAxO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgaXNfZ3V0ZW5iZXJnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLmNsYXNzTGlzdC5jb250YWlucygnYmxvY2stZWRpdG9yLXBhZ2UnKTtcclxuICAgICAgICAgICAgaWYgKGlzX3NhdmVkICYmIGlzX3NhdmVkICE9IDApIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2h0bWwnKS5jbGFzc0xpc3QuYWRkKCdkYXJrLW1vZGUtYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGFyay1tb2RlLXN3aXRjaCcpLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgRGFya01vZGUuZW5hYmxlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBoYW5kbGVTd2l0Y2hUb2dnbGU6IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2h0bWwnKS5jbGFzc0xpc3QudG9nZ2xlKCdkYXJrLW1vZGUtYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kYXJrLW1vZGUtc3dpdGNoJykuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBpc19zYXZlZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2h0bWwnKS5jbGFzc0xpc3QuY29udGFpbnMoJ2RhcmstbW9kZS1hY3RpdmUnKSA/IDEgOiAwO1xyXG4gICAgICAgICAgICBpZihpc19zYXZlZCl7XHJcbiAgICAgICAgICAgICAgICBEYXJrTW9kZS5lbmFibGUoKTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBEYXJrTW9kZS5kaXNhYmxlKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdkYXJrX21vZGVfYWN0aXZlJywgaXNfc2F2ZWQpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGhhbmRsZUV4Y2x1ZGVzOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kYXJrLW1vZGUtaWdub3JlLCAuY29sb3ItcGFsZXR0ZSwgLmhlYWx0aC1jaGVjay1hY2NvcmRpb24taGVhZGluZycpO1xyXG5cclxuICAgICAgICAgICAgaWYoIWVsZW1lbnRzKXtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZWxlbWVudHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdkYXJrLW1vZGUtaWdub3JlJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZHJlbiA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnKicpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNoaWxkcmVuLmZvckVhY2goKGNoaWxkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQuY2xhc3NMaXN0LmFkZCgnZGFyay1tb2RlLWlnbm9yZScpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgIH07XHJcblxyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGFwcC5pbml0KTtcclxuXHJcbn0pKCk7XHJcbiIsIjsoZnVuY3Rpb24gKCQpIHtcclxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgLy9IYW5kbGUgdGhlIHVwZGF0ZSBub3RpY2VcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCcud3AtbWFya2Rvd24tZWRpdG9yLXVwZGF0ZS1ub3RpY2UgLm5vdGljZS1kaXNtaXNzJywgZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgd3AuYWpheC5zZW5kKCd3cF9tYXJrZG93bl9lZGl0b3JfdXBkYXRlX25vdGljZScsIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6ICgpID0+IHt9LFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IChlcnJvcikgPT4gY29uc29sZS5sb2coZXJyb3IpLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLyoqLS0tLS0tLS0tLS0tLS1SZXZpZXcgTm90aWNlLS0tLS0tLS0tLS0tLS0tLSoqL1xyXG4gICAgICAgIC8vaGFuZGxlIHJldmlldyBub3RpY2UgcmVtaW5kX2xhdGVyXHJcbiAgICAgICAgJCgnLndwLW1hcmtkb3duLWVkaXRvci1yZXZpZXctbm90aWNlIC5yZW1pbmRfbGF0ZXInKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQoJy5ub3RpY2Utb3ZlcmxheS13cmFwJykuY3NzKCdkaXNwbGF5JywgJ2ZsZXgnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy9jbG9zZSB0aGUgcmV2aWV3IG5vdGljZVxyXG4gICAgICAgICQoJy53cC1tYXJrZG93bi1lZGl0b3ItcmV2aWV3LW5vdGljZSAuY2xvc2Utbm90aWNlJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5ub3RpY2Utb3ZlcmxheS13cmFwJykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgICQoJy53cC1tYXJrZG93bi1lZGl0b3ItcmV2aWV3LW5vdGljZSAubm90aWNlLW92ZXJsYXktYWN0aW9ucyBhLCAud3AtbWFya2Rvd24tZWRpdG9yLXJldmlldy1ub3RpY2UgLm5vdGljZS1hY3Rpb25zIGEuaGlkZV9ub3RpY2UsIC53cC1tYXJrZG93bi1lZGl0b3ItcmV2aWV3LW5vdGljZSAubm90aWNlLWRpc21pc3MnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50cygnLndwLW1hcmtkb3duLWVkaXRvci1yZXZpZXctbm90aWNlJykuc2xpZGVVcCgpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHZhbHVlID0gJCh0aGlzKS5kYXRhKCd2YWx1ZScpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSA3O1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgd3AuYWpheC5zZW5kKCd3cF9tYXJrZG93bl9lZGl0b3JfcmV2aWV3X25vdGljZScsIHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IChlcnJvcikgPT4gY29uc29sZS5sb2coZXJyb3IpLFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICAvKi0tIEFmZmlsaWF0ZSBOb3RpY2UgLS0qL1xyXG4gICAgICAgIC8vY2xvc2UgdGhlIGFmZmlsaWF0ZSBub3RpY2VcclxuICAgICAgICAkKCcud3AtbWFya2Rvd24tZWRpdG9yLWFmZmlsaWF0ZS1ub3RpY2UgLmNsb3NlLW5vdGljZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcubm90aWNlLW92ZXJsYXktd3JhcCcpLmNzcygnZGlzcGxheScsICdub25lJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoJy53cC1tYXJrZG93bi1lZGl0b3ItYWZmaWxpYXRlLW5vdGljZSAuZGFzaGljb25zLWRpc21pc3MnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICQoJy53cC1tYXJrZG93bi1lZGl0b3ItYWZmaWxpYXRlLW5vdGljZSAubm90aWNlLW92ZXJsYXktd3JhcCcpLmNzcygnZGlzcGxheScsICdmbGV4Jyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoYC53cC1tYXJrZG93bi1lZGl0b3ItYWZmaWxpYXRlLW5vdGljZSAubm90aWNlLW92ZXJsYXktYWN0aW9ucyBhLCAud3AtbWFya2Rvd24tZWRpdG9yLWFmZmlsaWF0ZS1ub3RpY2UgLm5vdGljZS1kaXNtaXNzLCAud3AtbWFya2Rvd24tZWRpdG9yLWFmZmlsaWF0ZS1ub3RpY2UgLm5vdGljZS1hY3Rpb25zIGEuaGlkZV9ub3RpY2VgKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy53cC1tYXJrZG93bi1lZGl0b3ItYWZmaWxpYXRlLW5vdGljZScpLnNsaWRlVXAoKTtcclxuXHJcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9ICQodGhpcykuZGF0YSgndmFsdWUnKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gNztcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIHdwLmFqYXguc2VuZCgnd3BfbWFya2Rvd25fZWRpdG9yX2FmZmlsaWF0ZV9ub3RpY2UnLCB7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogKCkgPT4ge30sXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogKGVycm9yKSA9PiBjb25zb2xlLmxvZyhlcnJvciksXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgfSk7XHJcbn0pKGpRdWVyeSk7Il0sInNvdXJjZVJvb3QiOiIifQ==